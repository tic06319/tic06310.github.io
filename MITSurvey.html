<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Start</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>body{font-family:system-ui,Arial;margin:0;padding:24px} .muted{opacity:.6}</style>
</head>
<body>
  <div class="muted">Loading…</div>
  <script>
    const LIFF_ID   = '2008540814-VMa8YrGY';
    const FORM_BASE = 'https://docs.google.com/forms/d/e/1FAIpQLSfLlQT-ga4b-_1ZwtXdcaBeWKgOCkI7jE_fFR957W2x0zMgrQ/viewform';
    const ENTRY_UID = 'entry.359369857';

    (async () => {
      await liff.init({ liffId: LIFF_ID });
      if (!liff.isLoggedIn()) { liff.login(); return; }
      const pf = await liff.getProfile();
      const qs = new URLSearchParams();
      qs.set(ENTRY_UID, pf.userId);
      location.href = FORM_BASE + '?' + qs.toString();
    })().catch(err => {
      document.body.innerHTML = '<h3>LIFF 初始化失敗</h3><pre>'+ (err && err.message || err) +'</pre>';
    });
  </script>
</body>
</html>
